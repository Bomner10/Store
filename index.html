<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Johan's Store</title>
    <style>
        /* Estilos básicos para la aplicación de venta simple */
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 600px;
            text-align: center;
            box-sizing: border-box; /* Asegura que el padding se incluya en el ancho total */
        }

        h1 {
            margin-bottom: 20px;
            font-size: 24px;
        }

        .productos {
            text-align: left;
            margin-bottom: 20px;
        }

        .productos ul {
            list-style-type: none;
            padding: 0;
        }

        .productos li {
            margin-bottom: 10px;
        }

        input, button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            font-size: 16px;
            box-sizing: border-box; /* Asegura que el padding se incluya en el ancho total */
        }

        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 4px;
        }

        button:hover {
            background-color: #45a049;
        }

        .ticket {
            margin-top: 20px;
            text-align: left;
        }

        .ticket h2 {
            margin-bottom: 10px;
        }

        .ticket ul {
            list-style-type: none;
            padding: 0;
        }

        .ticket li {
            margin-bottom: 5px;
        }

        .ticket h3 {
            margin-top: 20px;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Johan's Store</h1>

        <!-- Sección de Productos -->
        <div class="productos">
            <h2>Productos Disponibles</h2>
            <ul id="productos-lista"></ul>
        </div>

        <!-- Ingreso de Código del Producto y Cantidad -->
        <input type="number" id="producto-codigo" placeholder="Código del producto">
        <input type="number" id="producto-cantidad" placeholder="Cantidad" min="1">
        <button id="agregar-producto-btn">Agregar Producto</button>

        <!-- Sección de Ticket -->
        <div id="ticket" class="ticket"></div>
        <button id="generar-pdf-btn">Generar PDF</button>
        <button id="enviar-whatsapp-btn">Enviar por WhatsApp</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script>
        const productos = {
            "1": { nombre: "Sabritas", precio: 15.0, stock: 100 },
            "2": { nombre: "Mazapan chocolate", precio: 6.0, stock: 100 },
            "3": { nombre: "Mazapan chico", precio: 4.0, stock: 100 },
            "4": { nombre: "Mazapan original", precio: 5.0, stock: 100 },
            "5": { nombre: "Borrachitos", precio: 3.0, stock: 100 },
            "6": { nombre: "Bombones", precio: 5.0, stock: 100 },
            "7": { nombre: "Chicles", precio: 1.0, stock: 100 },
            "8": { nombre: "Tamarroca", precio: 3.0, stock: 100 },
            "9": { nombre: "Gomitas", precio: 7.0, stock: 100 },
            "10": { nombre: "Pepitas", precio: 7.0, stock: 100 },
            "11": { nombre: "Cacahuates", precio: 5.0, stock: 100 },
            "12": { nombre: "Obleas", precio: 3.0, stock: 100 },
            "13": { nombre: "Bon o Bon", precio: 7.0, stock: 100 }
        };

        let ticket = [];

        function mostrarProductos() {
            const productosLista = document.getElementById('productos-lista');
            productosLista.innerHTML = '';

            for (const [codigo, producto] of Object.entries(productos)) {
                productosLista.innerHTML += `<li><strong>${codigo}:</strong> ${producto.nombre} - $${producto.precio.toFixed(2)} - Stock: ${producto.stock}</li>`;
            }
        }

        function agregarProducto() {
            const codigo = document.getElementById('producto-codigo').value;
            const cantidad = parseInt(document.getElementById('producto-cantidad').value);

            if (productos[codigo] && cantidad > 0 && productos[codigo].stock >= cantidad) {
                const producto = productos[codigo];
                producto.stock -= cantidad;
                ticket.push({ ...producto, cantidad });
                generarTicket();
                mostrarProductos();
            } else {
                alert("Ingrese un código de producto válido o cantidad correcta.");
            }
        }

        function generarTicket() {
            let total = 0;
            let ticketHtml = '<h2>Ticket</h2><ul>';

            ticket.forEach((item, index) => {
                ticketHtml += `<li>${index + 1}. ${item.nombre} - Cantidad: ${item.cantidad} - $${(item.precio * item.cantidad).toFixed(2)}</li>`;
                total += item.precio * item.cantidad;
            });

            ticketHtml += `</ul><h3>Total: $${total.toFixed(2)}</h3>`;

            document.getElementById('ticket').innerHTML = ticketHtml;
        }

        function generarPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            let contenido = 'Ticket\n\n';
            ticket.forEach((item, index) => {
                contenido += `${index + 1}. ${item.nombre} - Cantidad: ${item.cantidad} - $${(item.precio * item.cantidad).toFixed(2)}\n`;
            });

            const total = ticket.reduce((sum, item) => sum + item.precio * item.cantidad, 0);
            contenido += `\nTotal: $${total.toFixed(2)}`;

            doc.text(contenido, 10, 10);
            doc.save('ticket.pdf');
        }

        function enviarPorWhatsApp() {
            const numero = "5211234567890"; // Número de teléfono
            const texto = encodeURIComponent(document.getElementById('ticket').innerText);
            const url = `https://wa.me/${numero}?text=${texto}`;
            window.open(url, '_blank');
        }

        document.getElementById('agregar-producto-btn').addEventListener('click', agregarProducto);
        document.getElementById('generar-pdf-btn').addEventListener('click', generarPDF);
        document.getElementById('enviar-whatsapp-btn').addEventListener('click', enviarPorWhatsApp);

        mostrarProductos();
    </script>
</body>
</html>
